description: >
  Generate a Container Profile ("X-Ray") report for a given container build using the Slim Developer Platform. The generated report will be uploaded to CircleCI's Artifacts tab as a JSON document, and the container image will also be added to the user's "Favorites" collection in the Slim portal for easy access in the future.
# What will this job do?

docker:
  - image: cimg/base:<< parameters.cimgTag >>

parameters:
  imageName:
    type: string
    description: "Container image to scan, e.g. library/node:latest"
  imageConnector:
    type: string
    description: "Registry Connect from Slim platform, e.g. dockerhub.public"
  cimgTag:
    type: string
    default: "current"
    description: "Image tag to be used for the CircleCI base image (e.g., cimg/base)."
steps:
  - xray:
      imageName: << parameters.imageName >>
      imageConnector: << parameters.imageConnector >>
