description: >
  Generate a Multi-Engine Vulnerability Report for a given container build using the Slim Developer Platform.
  The generated report will be uploaded to CircleCI's Artifacts tab as a JSON document.
parameters:
  imageName:
    type: string
    description: "Container image to scan, e.g. library/node:latest"
  imageConnector:
    type: string
    description: "Registry Connect from Slim platform, e.g. dockerhub.public"
steps:
  - run:
      environment:
        PARAM_IMAGE: <<parameters.imageName>>
        IMAGE_CONNECTOR: <<parameters.imageConnector>>
        VSCAN_REQUEST: <<include(scripts/xray_request.json)>>
        README: <<include(scripts/readme.html)>>
      name: Engine Execution - Vulnarability Scan
      command: <<include(scripts/vscan.sh)>>
